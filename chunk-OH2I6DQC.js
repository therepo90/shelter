import{b as D,c as R,d as b}from"./chunk-CKT7LYB5.js";import"./chunk-VZPOKD32.js";import{a as K,b as Q}from"./chunk-RYFV6V7Q.js";import"./chunk-HE27AA4I.js";import{$a as N,A as f,D as c,E as l,F as r,G as y,K as u,L as x,M as g,T as d,U as h,W as C,Wa as F,X as v,Y as S,Ya as B,Z as E,_a as z,ab as W,bb as j,c as I,da as P,ea as M,fb as $,ga as k,i as T,ib as J,jb as A,kb as H,l as _,m as p,nb as q,ob as G,s,ta as O,ua as L,w,xa as V}from"./chunk-KTHZ3IH4.js";import"./chunk-VPJPYNFC.js";import"./chunk-QUJFQN2Y.js";import"./chunk-4L7JHAAJ.js";import"./chunk-6J3QJG2O.js";import"./chunk-3RMVT6ST.js";import"./chunk-ZO533RPQ.js";import"./chunk-OBMW3NET.js";import"./chunk-RKQEHJ2C.js";import"./chunk-ZNZLKUTA.js";import"./chunk-7FY2OE2O.js";import"./chunk-DSRCXFLC.js";import"./chunk-XYHBVNK4.js";import"./chunk-ABHPW7M2.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-4S7YFHGP.js";import"./chunk-CKP3SGE2.js";import"./chunk-JIPBSKIP.js";import"./chunk-CEKJCJ5E.js";import"./chunk-HF35MVHV.js";import"./chunk-65LW6U7E.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-H3Z6NBHK.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as m}from"./chunk-JHI3MBHO.js";function X(t,o){t&1&&y(0,"ion-spinner",7)}function Y(t,o){if(t&1&&(l(0,"ion-text",8),d(1),r()),t&2){let e=g();s(),h(e.loadError)}}function Z(t,o){if(t&1){let e=u();l(0,"ion-item",16),x("click",function(){let i=_(e).$implicit,a=g(3);return p(a.selectDog(i))}),l(1,"ion-label")(2,"span",17),d(3),r(),l(4,"span",18),d(5),r()()()}if(t&2){let e=o.$implicit;s(3),h(e.box),s(2),h(e.name)}}function ee(t,o){if(t&1&&(l(0,"ion-list",14),f(1,Z,6,2,"ion-item",15),r()),t&2){let e=g(2);s(),c("ngForOf",e.filteredDogs)}}function te(t,o){if(t&1){let e=u();l(0,"ion-item")(1,"ion-text"),d(2),r(),l(3,"ion-button",20),x("click",function(){let i=_(e).index,a=g(3);return p(a.removeDog(i))}),y(4,"ion-icon",21),r()()}if(t&2){let e=o.$implicit;s(2),C("",e.box,"-",e.name)}}function ie(t,o){if(t&1&&(l(0,"ion-list"),f(1,te,5,2,"ion-item",19),r()),t&2){let e=g(2);s(),c("ngForOf",e.selectedDogs)}}function ne(t,o){if(t&1){let e=u();l(0,"ion-list",9)(1,"ion-item")(2,"ion-label",10),d(3,"Wyszukaj psa"),r(),l(4,"ion-searchbar",11),E("ngModelChange",function(i){_(e);let a=g();return S(a.searchTerm,i)||(a.searchTerm=i),p(i)}),x("ionInput",function(){_(e);let i=g();return p(i.filterDogs())}),r()(),f(5,ee,2,1,"ion-list",12)(6,ie,2,1,"ion-list",13),r()}if(t&2){let e=g();s(4),v("ngModel",e.searchTerm),c("disabled",e.isLoading),s(),c("ngIf",e.filteredDogs.length>0&&e.searchTerm),s(),c("ngIf",e.selectedDogs.length>0)}}var he=(()=>{let o=class o{constructor(){this.dogs=[],this.filteredDogs=[],this.searchTerm="",this.selectedBoxes=[],this.selectedDogs=[],this.isLoading=!0,this.loadError=null,this.dogsService=T(R),K({close:Q})}ngOnInit(){return m(this,null,function*(){yield this.loadDogs()})}ionViewWillEnter(){return m(this,null,function*(){yield this.loadDogs()})}loadDogs(){return m(this,null,function*(){this.isLoading=!0,this.loadError=null;try{let[n,i]=yield Promise.all([I(this.dogsService.getAllDogs()),this.dogsService.getSelectedBoxes()]);this.dogs=b(n),this.filteredDogs=b(n),this.selectedBoxes=i,this.selectedDogs=b(n.filter(a=>i.some(U=>U.box===a.box))),this.isLoading=!1}catch{this.loadError="B\u0142\u0105d wczytywania piesk\xF3w",this.selectedDogs=[],this.isLoading=!1}})}filterDogs(){if(this.isLoading)return;let n=this.searchTerm.toLowerCase();this.filteredDogs=this.dogs.filter(i=>`${i.box}-${i.name}`.toLowerCase().includes(n))}selectDog(n){return m(this,null,function*(){this.selectedDogs.some(i=>i.box===n.box)||(this.selectedDogs.push(n),console.log("Saving Selected Dogs:",this.selectedDogs),yield D.set({key:"selectedDogs",value:JSON.stringify(this.selectedDogs)})),this.searchTerm="",this.filteredDogs=[]})}removeDog(n){return m(this,null,function*(){this.selectedDogs.splice(n,1),yield D.set({key:"selectedDogs",value:JSON.stringify(this.selectedDogs)})})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=w({type:o,selectors:[["app-tab2"]],decls:12,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["name","crescent","class","ion-margin",4,"ngIf"],["color","danger",4,"ngIf"],["style","padding: 16px;",4,"ngIf"],["name","crescent",1,"ion-margin"],["color","danger"],[2,"padding","16px"],["position","stacked"],["placeholder","Wpisz imi\u0119 lub box",3,"ngModelChange","ionInput","ngModel","disabled"],["class","dog-suggestions-list",4,"ngIf"],[4,"ngIf"],[1,"dog-suggestions-list"],["class","dog-suggestion-item",3,"click",4,"ngFor","ngForOf"],[1,"dog-suggestion-item",3,"click"],[1,"dog-suggestion-box"],[1,"dog-suggestion-name"],[4,"ngFor","ngForOf"],["fill","clear","slot","end","color","danger",3,"click"],["name","close"]],template:function(i,a){i&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3," Moje psy "),r()()(),l(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),d(8,"Moje psy"),r()()(),f(9,X,1,0,"ion-spinner",4)(10,Y,2,1,"ion-text",5)(11,ne,7,4,"ion-list",6),r()),i&2&&(c("translucent",!0),s(4),c("fullscreen",!0),s(5),c("ngIf",a.isLoading),s(),c("ngIf",a.loadError),s(),c("ngIf",!a.isLoading&&!a.loadError))},dependencies:[k,P,M,V,O,L,W,z,H,J,F,q,A,B,G,j,N,$],styles:[".dog-suggestions-list[_ngcontent-%COMP%]{background:#f7fafd;border-radius:1.2rem;margin-top:.5rem;box-shadow:0 2px 8px #00000012;padding:.2rem}.dog-suggestion-item[_ngcontent-%COMP%]{background:#e3f2fd;border-radius:.9rem;margin:.18rem .2rem;transition:background .18s;cursor:pointer;border:1.5px solid #b3e5fc}.dog-suggestion-item[_ngcontent-%COMP%]:hover, .dog-suggestion-item[_ngcontent-%COMP%]:active{background:#b3e5fc}.dog-suggestion-box[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-right:.7em;font-size:1.13em}.dog-suggestion-name[_ngcontent-%COMP%]{color:#333;font-size:1.13em}"]});let t=o;return t})();export{he as Tab2Page};
