import{a as b}from"./chunk-LEOWQQUF.js";import{a as K,b as Q}from"./chunk-MX2EUTU5.js";import{e as D,f as R}from"./chunk-GO2RQGZK.js";import{$ as S,$a as B,Aa as V,C as f,F as c,G as l,H as r,I as y,M as u,N as x,O as g,W as d,X as h,Z as C,Za as F,_ as v,aa as E,bb as z,c as I,cb as N,db as W,eb as j,ga as P,ha as M,ib as $,ja as k,k as T,lb as J,mb as A,n as _,nb as H,o as p,qb as q,sb as G,u as s,wa as O,xa as L,y as w}from"./chunk-KRDZAR6Z.js";import"./chunk-VQJLRZDC.js";import"./chunk-JBCXF56H.js";import"./chunk-QUJFQN2Y.js";import"./chunk-6HU4TFNA.js";import"./chunk-SROQCUWQ.js";import"./chunk-TX4Q6HNZ.js";import"./chunk-2J4NCJOL.js";import"./chunk-LBCXAYCZ.js";import"./chunk-5UYKJVW7.js";import"./chunk-J7EDNWVB.js";import"./chunk-BMJVVMK5.js";import"./chunk-NHGX5HSY.js";import"./chunk-I3JQUJOC.js";import"./chunk-7LKXLI3U.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-BZSE2QSZ.js";import"./chunk-CKP3SGE2.js";import"./chunk-DW55EUKJ.js";import"./chunk-JNSPDWUV.js";import"./chunk-HNZXAMTE.js";import"./chunk-SCQXEI7G.js";import"./chunk-PGY34PD4.js";import"./chunk-GYLY2RJE.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-H3Z6NBHK.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{g as m}from"./chunk-2R6CW7ES.js";function X(t,o){t&1&&y(0,"ion-spinner",7)}function Y(t,o){if(t&1&&(l(0,"ion-text",8),d(1),r()),t&2){let e=g();s(),h(e.loadError)}}function Z(t,o){if(t&1){let e=u();l(0,"ion-item",16),x("click",function(){let i=_(e).$implicit,a=g(3);return p(a.selectDog(i))}),l(1,"ion-label")(2,"span",17),d(3),r(),l(4,"span",18),d(5),r()()()}if(t&2){let e=o.$implicit;s(3),h(e.box),s(2),h(e.name)}}function ee(t,o){if(t&1&&(l(0,"ion-list",14),f(1,Z,6,2,"ion-item",15),r()),t&2){let e=g(2);s(),c("ngForOf",e.filteredDogs)}}function te(t,o){if(t&1){let e=u();l(0,"ion-item")(1,"ion-text"),d(2),r(),l(3,"ion-button",20),x("click",function(){let i=_(e).index,a=g(3);return p(a.removeDog(i))}),y(4,"ion-icon",21),r()()}if(t&2){let e=o.$implicit;s(2),C("",e.box,"-",e.name)}}function ie(t,o){if(t&1&&(l(0,"ion-list"),f(1,te,5,2,"ion-item",19),r()),t&2){let e=g(2);s(),c("ngForOf",e.selectedDogs)}}function ne(t,o){if(t&1){let e=u();l(0,"ion-list",9)(1,"ion-item")(2,"ion-label",10),d(3,"Wyszukaj psa"),r(),l(4,"ion-searchbar",11),E("ngModelChange",function(i){_(e);let a=g();return S(a.searchTerm,i)||(a.searchTerm=i),p(i)}),x("ionInput",function(){_(e);let i=g();return p(i.filterDogs())}),r()(),f(5,ee,2,1,"ion-list",12)(6,ie,2,1,"ion-list",13),r()}if(t&2){let e=g();s(4),v("ngModel",e.searchTerm),c("disabled",e.isLoading),s(),c("ngIf",e.filteredDogs.length>0&&e.searchTerm),s(),c("ngIf",e.selectedDogs.length>0)}}var he=(()=>{let o=class o{constructor(){this.dogs=[],this.filteredDogs=[],this.searchTerm="",this.selectedBoxes=[],this.selectedDogs=[],this.isLoading=!0,this.loadError=null,this.dogsService=T(R),K({close:Q})}ngOnInit(){return m(this,null,function*(){yield this.loadDogs()})}ionViewWillEnter(){return m(this,null,function*(){yield this.loadDogs()})}loadDogs(){return m(this,null,function*(){this.isLoading=!0,this.loadError=null;try{let[n,i]=yield Promise.all([I(this.dogsService.getAllDogs()),this.dogsService.getSelectedBoxes()]);this.dogs=b(n),this.filteredDogs=b(n),this.selectedBoxes=i,this.selectedDogs=b(n.filter(a=>i.some(U=>U.box===a.box))),this.isLoading=!1}catch{this.loadError="B\u0142\u0105d wczytywania piesk\xF3w",this.selectedDogs=[],this.isLoading=!1}})}filterDogs(){if(this.isLoading)return;let n=this.searchTerm.toLowerCase();this.filteredDogs=this.dogs.filter(i=>`${i.box}-${i.name}`.toLowerCase().includes(n))}selectDog(n){return m(this,null,function*(){this.selectedDogs.some(i=>i.box===n.box)||(this.selectedDogs.push(n),console.log("Saving Selected Dogs:",this.selectedDogs),yield D.set({key:"selectedDogs",value:JSON.stringify(this.selectedDogs)})),this.searchTerm="",this.filteredDogs=[]})}removeDog(n){return m(this,null,function*(){this.selectedDogs.splice(n,1),yield D.set({key:"selectedDogs",value:JSON.stringify(this.selectedDogs)})})}};o.\u0275fac=function(i){return new(i||o)},o.\u0275cmp=w({type:o,selectors:[["app-tab2"]],decls:12,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],["name","crescent","class","ion-margin",4,"ngIf"],["color","danger",4,"ngIf"],["style","padding: 16px;",4,"ngIf"],["name","crescent",1,"ion-margin"],["color","danger"],[2,"padding","16px"],["position","stacked"],["placeholder","Wpisz imi\u0119 lub box",3,"ngModelChange","ionInput","ngModel","disabled"],["class","dog-suggestions-list",4,"ngIf"],[4,"ngIf"],[1,"dog-suggestions-list"],["class","dog-suggestion-item",3,"click",4,"ngFor","ngForOf"],[1,"dog-suggestion-item",3,"click"],[1,"dog-suggestion-box"],[1,"dog-suggestion-name"],[4,"ngFor","ngForOf"],["fill","clear","slot","end","color","danger",3,"click"],["name","close"]],template:function(i,a){i&1&&(l(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),d(3," Moje psy "),r()()(),l(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),d(8,"Moje psy"),r()()(),f(9,X,1,0,"ion-spinner",4)(10,Y,2,1,"ion-text",5)(11,ne,7,4,"ion-list",6),r()),i&2&&(c("translucent",!0),s(4),c("fullscreen",!0),s(5),c("ngIf",a.isLoading),s(),c("ngIf",a.loadError),s(),c("ngIf",!a.isLoading&&!a.loadError))},dependencies:[k,P,M,V,O,L,W,z,H,J,F,q,A,B,G,j,N,$],styles:[".dog-suggestions-list[_ngcontent-%COMP%]{background:#f7fafd;border-radius:1.2rem;margin-top:.5rem;box-shadow:0 2px 8px #00000012;padding:.2rem}.dog-suggestion-item[_ngcontent-%COMP%]{background:#e3f2fd;border-radius:.9rem;margin:.18rem .2rem;transition:background .18s;cursor:pointer;border:1.5px solid #b3e5fc}.dog-suggestion-item[_ngcontent-%COMP%]:hover, .dog-suggestion-item[_ngcontent-%COMP%]:active{background:#b3e5fc}.dog-suggestion-box[_ngcontent-%COMP%]{font-weight:700;color:#1976d2;margin-right:.7em;font-size:1.13em}.dog-suggestion-name[_ngcontent-%COMP%]{color:#333;font-size:1.13em}"]});let t=o;return t})();export{he as Tab2Page};
