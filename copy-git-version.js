// Skrypt do kopiowania .git-version do katalogu assets ORAZ generowania app-version.ts
const fs = require('fs');
const path = require('path');

const src = path.join(__dirname, '.git-version');
const dest = path.join(__dirname, 'src', 'assets', '.git-version');
const tsDest = path.join(__dirname, 'src', 'app', 'app-version.ts');

if (fs.existsSync(src)) {
  fs.copyFileSync(src, dest);
  console.log('.git-version copied to src/assets/.git-version');
  const version = fs.readFileSync(src, 'utf8').trim();
  const tsContent = `// This file is auto-generated by copy-git-version.js\nexport const APP_VERSION = '${version}';\n`;
  fs.writeFileSync(tsDest, tsContent);
  console.log('app-version.ts generated with version:', version);
} else {
  console.error('.git-version not found!');
  process.exit(1);
}
